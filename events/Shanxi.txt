###########################
# Shanxi Clique Events
###########################
# By 彭湃
###########################

add_namespace = shx
add_namespace = shx.earlygame
add_namespace = shx.edu
add_namespace = shx.agri
add_namespace = shx.industry
add_namespace = shx.mil
add_namespace = shx.powerstruggle
add_namespace = shx.QIE.aid
add_namespace = shx.shx.suiyuan.campaign
add_namespace = shx_mission_tick

########################################
########-       开局          -#########
########################################
country_event = {#晋系军阀
	id = shx.0
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.0" }
	title = shx.0.t
	desc = shx.0.d
	picture = GFX_report_event_GXC_federalist_troops_mountains

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = shx.0.a
		hidden_effect = {
			country_event = { id = shx.earlygame.1 days = 1 }
		}
	}

	option = {
		name = shx.0.b
		hidden_effect = {
			add_ideas = SHX_dual_armies
		}
	}
}
country_event = {#晋绥军与国民军的联盟
	id = shx.earlygame.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.earlygame.1" }
	title = shx.earlygame.1.t
	desc = shx.earlygame.1.d
	picture = GFX_report_event_GXC_federalist_troops_mountains

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = shx.earlygame.1.a
		hidden_effect = {
			country_event = { id = shx.earlygame.2 days = 1 }
		}
	}

	option = {
		name = shx.earlygame.1.b
		hidden_effect = {
			add_ideas = SHX_dual_armies
		}
	}
}
country_event = {#同省异梦
	id = shx.earlygame.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.earlygame.2" }
	title = shx.earlygame.2.t
	desc = shx.earlygame.2.d
	picture = GFX_report_event_GXC_federalist_troops_mountains

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = shx.earlygame.2.a
		hidden_effect = {
			add_ideas = SHX_dual_armies
		}
	}
}
country_event = {#东亚监事会宣布在八省联合扩张
	id = shx.earlygame.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.earlygame.3" }
	title = shx.earlygame.3.t
	desc = shx.earlygame.3.d
	picture = GFX_report_event_SHX_tongpu_railway

	fire_only_once = yes
	is_triggered_only = yes

	option = { 
		name = shx.earlygame.3.a
		add_political_power = -30
		hidden_effect = {
			country_event = { id = shx.earlygame.4 days = 5 }
		}
	}
}
country_event = {#农民对德国人掠夺资源感到震怒
	id = shx.earlygame.4
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.earlygame.4" }
	title = shx.earlygame.4.t
	desc = shx.earlygame.4.d
	picture = GFX_report_event_CUB_mine

	fire_only_once = yes
	is_triggered_only = yes

	option = { 
		name = shx.earlygame.4.a
		add_stability = -0.01
	}
}
country_event = {#十年一梦
	id = shx.earlygame.5
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.earlygame.5" }
	title = shx.earlygame.5.t
	desc = shx.earlygame.5.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { 
		name = shx.earlygame.5.a
		set_country_flag = SHX_yan_feng_split
		hidden_effect = {
			set_power_balance = {
				id = SHX_power_balance
				left_side = SHX_yan_winning_side
				right_side = SHX_feng_winning_side
				set_value = -0.2
			}
			activate_mission = SHX_looming_gmj_coup
			add_ideas = SHX_guominjun_unrest_idea
			set_variable = {
				SHX_revolution_line = 0
			}			
			country_event = {
				id = shx.earlygame.7
				days = 3
			}
		}
	}
}
country_event = {#夜谈
	id = shx.earlygame.6
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.earlygame.6" }
	title = shx.earlygame.6.t
	desc = shx.earlygame.6.d

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		set_country_flag = Shanxi_open_for_investment
		hidden_effect = {
			QIE = {
				country_event = { 
					id = shx.QIE.aid.2 
					days = 7 
				}
			}
		}
	}

	option = { 
		name = shx.earlygame.6.a
		SHX_QIE_investment_medium = yes
		add_political_power = -20
		SHX_set_up_QIE_influence_game = yes
		hidden_effect = {
			country_event = { id = shx.earlygame.9 days = 2 }
		}
	}
}
country_event = {#冯玉祥提出向国民军划拨更多经费
	id = shx.earlygame.7
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.earlygame.7" }
	title = shx.earlygame.7.t
	desc = shx.earlygame.7.d
	picture = GFX_report_event_SHX_feng_and_yan_2

	fire_only_once = yes
	is_triggered_only = yes


	option = {
		name = shx.earlygame.7.a
		add_war_support = -0.025
		add_command_power = 30
	}
	option = {
		name = shx.earlygame.7.b 
		trigger = { is_ai = no }
		add_war_support = -0.025
		add_command_power = 30
		country_event = shx.earlygame.8
	}
}
country_event = {#我军组成
	id = shx.earlygame.8
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.earlygame.8" }
	title = shx.earlygame.8.t
	desc = shx.earlygame.8.d
	picture = GFX_report_event_SHX_yan_troops

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = shx.earlygame.8.a
	}
}
country_event = {#冯玉祥前往陕西
	id = shx.earlygame.9
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.earlygame.9" }
	title = shx.earlygame.9.t
	desc = shx.earlygame.9.d
	picture = GFX_report_event_SHX_feng_nature

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			country_event = { id = shx.earlygame.10 days = 14 }
		}
	}

	option = {
		name = shx.earlygame.9.a
		add_stability = -0.05
		hidden_effect = {
			set_temp_variable = { coalition_partner_var = token:authoritarian_democrat }
			remove_from_coalition = yes
		}
		custom_effect_tooltip = SHX_GMJ_leaves_coalition_tooltip
	}
}
country_event = {#井岳秀之死
	id = shx.earlygame.10
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.earlygame.10" }
	title = shx.earlygame.10.t
	desc = shx.earlygame.10.d
	picture = GFX_report_event_SHX_jing_yuexiu

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = shx.earlygame.10.a
		ai_chance = {
			base = 50
		}
		add_stability = -0.025
		SHX_strengthen_feng_small = yes
		SHX_revolution_small = yes
	}

	option = {
		name = shx.earlygame.10.b
		ai_chance = {
			base = 50
		}
		add_political_power = -25
		SHX_strengthen_yan_small = yes
		SHX_revolution_small = yes
	}
}
country_event = {#黑色星期一到来！
	id = shx.earlygame.11
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.earlygame.11" }
	title = shx.earlygame.11.t
	desc = shx.earlygame.11.d
	picture = GFX_report_event_SHX_taiyuan_panic

	immediate = {
		hidden_effect = {
			swap_ideas = {
				remove_idea = SHX_underdeveloped_mountain_economy
				add_idea = SHX_underdeveloped_mountain_economy0
			}
		}
	}

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = shx.earlygame.11.a
		add_stability = -0.10
	}
}
country_event = {#十年计划继续！
	id = shx.earlygame.12 
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.earlygame.12" }
	title = shx.earlygame.12.t
	desc = shx.earlygame.12.d

	is_triggered_only = yes

	option = {
		name = shx.earlygame.12.a
		trigger = { is_ai = no }
		country_event = shx.earlygame.13
	}
	option = {
		name = shx.earlygame.12.b
		trigger = { is_ai = no }
		country_event = shx.earlygame.14
	}
	option = {
		name = shx.earlygame.12.c

	}
}
country_event = {#十年计划的目标
	id = shx.earlygame.13
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.earlygame.13" }
	title = shx.earlygame.13.t
	desc = shx.earlygame.13.d

	is_triggered_only = yes

	option = {
		name = shx.earlygame.12.b
		trigger = { is_ai = no }
		country_event = shx.earlygame.14
	}
	option = {
		name = shx.earlygame.13.a
		trigger = { is_ai = no }
		country_event = shx.earlygame.12
	}
	option = {
		name = shx.earlygame.12.c

	}
}
country_event = {#十年计划的目标
	id = shx.earlygame.14
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.earlygame.14" }
	title = shx.earlygame.14.t
	desc = shx.earlygame.14.d

	is_triggered_only = yes

	option = {
		name = shx.earlygame.13.a
		trigger = { is_ai = no }
		country_event = shx.earlygame.12
	}
	option = {
		name = shx.earlygame.12.a
		trigger = { is_ai = no }
		country_event = shx.earlygame.13
	}
	option = {
		name = shx.earlygame.12.c

	}
}

########################################
########-       教育          -#########
########################################
country_event = {#教育改革接近完成
	id = shx.edu.0
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.edu.0" }
	title = shx.edu.0.t
	desc = {
		text = shx.edu.0.d.yan
		trigger = {
			has_country_flag = shx_education_yan_path
		}
	}
	desc = {
		text = shx.edu.0.d.feng
		trigger = {
			has_country_flag = shx_education_feng_path
		}
	}
	desc = {
		text = shx.edu.0.d.default
		trigger = {
			NOT = {
				OR = {
					has_country_flag = shx_education_yan_path
					has_country_flag = shx_education_feng_path
				}
			}
		}
	}

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = shx.edu.0.a
		set_country_flag = SHX_educational_reform_completed_flag
		if = { #Failsafe
			limit = { has_active_mission = SHX_educational_reform_mission_timer }
			remove_mission = SHX_educational_reform_mission_timer
		}
		custom_effect_tooltip = SHX_Education_Reform_Complete_Tooltip
	}
}
country_event = {#教育新生一代
	id = shx.edu.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.edu.1" }
	title = shx.edu.1.t
	desc = shx.edu.1.d
	picture = GFX_report_event_SHX_shanxi_university

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			country_event = { id = shx.edu.2 days = 7 } #Jen comes home, starts flavor event chain
			activate_mission = SHX_educational_reform_mission_timer
		}
	}

	option = {
		name = shx.edu.1.a #Sorry kids
		trigger = { NOT = { has_country_flag = SHX_feng_victory_over_yan } }
		ai_chance = {
			base = 60
			modifier = {
				factor = 5 #Lock-in: After Oct-1936 SHX should try to be more aggressive in choosing a side
				date > 1936.10.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_yan_is_winning_trigger = yes
			}
			modifier = {
				factor = 3 #Lock-in: After Jan-1936 SHX should try to be more aggressive in choosing a side
				date > 1937.01.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_yan_is_winning_trigger = yes
			}
			modifier = {
				factor = 0 #Lock-in: After Mar-1937 SHX will stop choosing focuses related to the opposite side until the power struggle is won.
				date > 1937.03.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_feng_is_winning_trigger = yes
			}
		}
		set_country_flag = shx_education_yan_path
		hidden_effect = {
			country_event = { id = shx_mission_tick.1 days = 5 }
		}
		custom_effect_tooltip = SHX_Yan_Favored_10_Year_tooltip
		if = {
			limit = { has_war = yes }
			add_days_mission_timeout = {
				mission = SHX_educational_reform_mission_timer
				days = 400
			}
			custom_effect_tooltip = SHX_reform_disrupted_by_war_tooltip
		}
	}

	option = {
		name = shx.edu.1.b
		trigger = { NOT = { has_country_flag = SHX_yan_victory_over_gmj } }
		ai_chance = {
			base = 40
			modifier = {
				factor = 5 #Lock-in: After Oct-1936 SHX should try to be more aggressive in choosing a side
				date > 1936.10.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_feng_is_winning_trigger = yes
			}
			modifier = {
				factor = 3 #Lock-in: After Jan-1936 SHX should try to be more aggressive in choosing a side
				date > 1937.01.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_feng_is_winning_trigger = yes
			}
			modifier = {
				factor = 0 #Lock-in: After Mar-1937 SHX will stop choosing focuses related to the opposite side until the power struggle is won.
				date > 1937.03.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_yan_is_winning_trigger = yes
			}
		}
		set_country_flag = shx_education_feng_path
		hidden_effect = {
			country_event = { id = shx_mission_tick.4 days = 5 }
		}
		custom_effect_tooltip = SHX_Feng_Favored_10_Year_tooltip
		if = {
			limit = { has_war = yes }
			add_days_mission_timeout = {
				mission = SHX_educational_reform_mission_timer
				days = 400
			}
			custom_effect_tooltip = SHX_reform_disrupted_by_war_tooltip
		}
	}
}
country_event = {#任之恭归乡！
	id = shx.edu.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.edu.2" }
	title = shx.edu.2.t
	desc = shx.edu.2.d
	picture = GFX_report_event_SHX_ren_zhigong

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = shx.edu.2.a
		add_political_power = 20
	}
}

########################################
########-       农业          -#########
########################################
country_event = {#土地改革
	id = shx.agri.1 
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.agri.1" }
	title = shx.agri.1.t
	desc = shx.agri.1.d

	fire_only_once = yes
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			activate_mission = shx_agricultural_reform_mission_timer
			country_event = { id = shx.agri.4 days = 7 } 
		}
	}

	option = {
		name = shx.agri.1.yan
		trigger = {
			NOT = { has_country_flag = SHX_feng_victory_over_yan }
		}
		ai_chance = {
			base = 40
			modifier = {
				factor = 5 #Lock-in: After Oct-1936 SHX should try to be more aggressive in choosing a side
				date > 1936.10.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_yan_is_winning_trigger = yes
			}
			modifier = {
				factor = 3 #Lock-in: After Jan-1936 SHX should try to be more aggressive in choosing a side
				date > 1937.01.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_yan_is_winning_trigger = yes
			}
			modifier = {
				factor = 0 #Lock-in: After Mar-1937 SHX will stop choosing focuses related to the opposite side until the power struggle is won.
				date > 1937.03.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_feng_is_winning_trigger = yes
			}
		}
		hidden_effect = {
			set_country_flag = SHX_yan_land_reform
			country_event = { id = shx_mission_tick.3 days = 5 }
		}
		custom_effect_tooltip = SHX_Yan_Favored_10_Year_tooltip
		if = {
			limit = { has_war = yes }
			add_days_mission_timeout = {
				mission = shx_agricultural_reform_mission_timer
				days = 400
			}
			custom_effect_tooltip = SHX_reform_disrupted_by_war_tooltip
		}
	}
	option = {
		name = shx.agri.1.feng
		trigger = {
			NOT = { has_country_flag = SHX_yan_victory_over_gmj }
		}
		ai_chance = {
			base = 60
			modifier = {
				factor = 5 #Lock-in: After Oct-1936 SHX should try to be more aggressive in choosing a side
				date > 1936.10.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_feng_is_winning_trigger = yes
			}
			modifier = {
				factor = 3 #Lock-in: After Oct-1936 SHX should try to be more aggressive in choosing a side
				date > 1936.10.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_feng_is_winning_trigger = yes
			}
			modifier = {
				factor = 0 #Lock-in: After mid 1937 SHX will stop choosing focuses related to the opposite side until the power struggle is won.
				date > 1937.06.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_yan_is_winning_trigger = yes
			}
		}
		hidden_effect = {
			set_country_flag = SHX_feng_land_reform
			country_event = { id = shx_mission_tick.6 days = 5 }
		}
		custom_effect_tooltip = SHX_Feng_Favored_10_Year_tooltip
		if = {
			limit = { has_war = yes }
			add_days_mission_timeout = {
				mission = SHX_agricultural_reform_mission_timer
				days = 400
			}
			custom_effect_tooltip = SHX_reform_disrupted_by_war_tooltip
		}
	}
}
country_event = {#土地改革完成
	id = shx.agri.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.agri.2" }
	title = shx.agri.2.t
	desc = {
		text = shx.agri.2.d.yan
		trigger = {
			has_country_flag = SHX_yan_land_reform
		}
	}
	desc = {
		text = shx.agri.2.d.feng
		trigger = {
			has_country_flag = SHX_feng_land_reform
		}
	}
	desc = {
		text = shx.agri.2.default
		trigger = {
			NOT = {
				OR = {
					has_country_flag = SHX_yan_land_reform
					has_country_flag = SHX_feng_land_reform
				}
			}
		}
	}

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = shx.agri.2.a
		set_country_flag = SHX_agricultural_reform_completed_flag
		if = { #Failsafe
			limit = { has_active_mission = SHX_agricultural_reform_mission_timer }
			remove_mission = SHX_agricultural_reform_mission_timer
		}
		custom_effect_tooltip = SHX_Agriculture_Reform_Complete_Tooltip
	}
}
country_event = {#制定农业预算案
	id = shx.agri.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.agri.3" }
	title = shx.agri.3.t
	desc = shx.agri.3.d

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = shx.agri.3.a
		ai_chance = {
			base = 33
			modifier = {
				factor = 1.5
				has_political_power > 60
			}
		}
		add_political_power = -100
		add_stability = -0.05
	}

	option = {
		name = shx.agri.3.b
		ai_chance = {
			base = 33
			modifier = {
				factor = 1.5
				has_political_power < 25
			}
		}
		trigger = { SHX_QIE_influence_active = yes }
		SHX_QIE_investment_medium = yes
		SHX_econ_update = yes
		SHX_revolution_medium = yes
	}

	option = {
		name = shx.agri.3.c
		ai_chance = {
			base = 33
			modifier = {
				factor = 1.5
				has_war_support > 0.50
			}
		}
		add_political_power = -50
		add_war_support = -0.1
	}
}
country_event = {#三师传
	id = shx.agri.4
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.agri.4" }
	title = shx.agri.4.t
	desc = shx.agri.4.d

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			country_event = { id = shx.agri.5 days = 21 } 
		}
	}

	option = {
		name = shx.agri.4.a
		add_political_power = 50
	}
}
country_event = {#乡绅抗议
	id = shx.agri.5
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.agri.5" }
	title = shx.agri.5.t
	desc = shx.agri.5.d

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			country_event = { id = shx.agri.6 days = 62 } #The Great Grain Robbery
		}
	}

	option = {
		name = shx.agri.5.a
		ai_chance = {
			base = 50
			modifier = {
				factor = 1.5
				check_variable = {
					SHX_QIE_influence_variable < 30
				}
			}
		}
		SHX_QIE_investment_medium = yes
		add_stability = -0.07
	}

	option = {
		name = shx.agri.5.b
		ai_chance = {
			base = 50
			modifier = {
				factor = 1.5
				check_variable = {
					has_political_power < 25
				}
			}
		}
		add_political_power = 75
		add_timed_idea = {
			idea = SHX_paying_off_gentry
			days = 90
		}
	}
}
country_event = {#大稻贼
	id = shx.agri.6
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.agri.6" }
	title = shx.agri.6.t
	desc = shx.agri.6.d

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			country_event = { id = shx.agri.7 days = 21 } 
		}
	}

	option = {
		name = shx.agri.6.a
		ai_chance = {
			base = 50
			modifier = {
				factor = 1.5
				check_variable = {
					has_stability > 0.30
				}
			}
		}
		add_days_mission_timeout = {
			mission = SHX_agricultural_reform_mission_timer
			days = -120
		}
	}

	option = {
		name = shx.agri.6.b
		ai_chance = {
			base = 50
			modifier = {
				factor = 1.5
				check_variable = {
					has_political_power < 25
				}
			}
		}
		add_political_power = 50
		add_days_mission_timeout = {
			mission = SHX_agricultural_reform_mission_timer
			days = 120
		}
	}
}
country_event = {#公道之团
	id = shx.agri.7
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.agri.7" }
	title = shx.agri.7.t
	desc = {
		text = shx.agri.7.feng
		trigger = { has_country_flag = SHX_feng_victory_over_yan }
	}
	desc = {
		text = shx.agri.7.default
		trigger = { NOT = { has_country_flag = SHX_feng_victory_over_yan } }
	}

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = shx.agri.7.a
		ai_chance = {
			base = 50
			modifier = {
				factor = 2 #Lock-in: After Oct-1936 SHX should try to be more aggressive in choosing a side
				date > 1936.10.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_yan_is_winning_trigger = yes
			}
			modifier = {
				factor = 3 #Lock-in: After Jan-1936 SHX should try to be more aggressive in choosing a side
				date > 1937.01.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_yan_is_winning_trigger = yes
			}
		}
		random_owned_controlled_state = {
			limit = {
				NOT = {
					state = 1072
				}
			}
			damage_building = {
				type = infrastructure
				damage = 0.25
			}
		}
		random_owned_controlled_state = {
			limit = {
				NOT = {
					state = 1072
				}
			}
			damage_building = {
				type = industrial_complex
				damage = 0.25
			}
		}
		if = {
			limit = { NOT = { has_country_flag = SHX_feng_victory_over_yan } }
			SHX_strengthen_yan_medium = yes
		}
		else = {
			SHX_strengthen_feng_medium = yes
		}
	}

	option = {
		name = shx.agri.7.b
		ai_chance = {
			base = 50
			modifier = {
				factor = 2 #Lock-in: After Oct-1936 SHX should try to be more aggressive in choosing a side
				date > 1936.10.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_feng_is_winning_trigger = yes
			}
			modifier = {
				factor = 3 #Lock-in: After Jan-1936 SHX should try to be more aggressive in choosing a side
				date > 1937.01.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_feng_is_winning_trigger = yes
			}
		}
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = -300
		}
		add_war_support = -0.03
		if = {
			limit = {
				NOT = {
					has_country_flag = SHX_feng_victory_over_yan
				}
			}
			SHX_strengthen_feng_medium = yes
		}
		else = {
			add_popularity = {
				ideology = radical_socialist
				popularity = 0.02
			}
			add_popularity = {
				ideology = social_democrat
				popularity = 0.03
			}
		}
	}
}

########################################
########-       工业          -#########
########################################
country_event = {#工业改革接近完成！
	id = shx.industry.0 
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.industry.0" }
	title = shx.industry.0.t
	desc = {
		text = shx.industry.0.d_Yan
		trigger = {
			has_country_flag = SHX_favored_yan_industry
		}
	}
	desc = {
		text = shx.industry.0.d_Feng
		trigger = {
			has_country_flag = SHX_favored_feng_industry
		}
	}
	desc = {
		text = shx.industry.0.default
		trigger = {
			NOT = {
				OR = {
					has_country_flag = SHX_favored_feng_industry
					has_country_flag = SHX_favored_yan_industry
				}
			}
		}
	}
	is_triggered_only = yes
	option = {
		name = shx.industry.0.a
		if = { #Failsafe
			limit = { has_active_mission = SHX_industrial_reform_mission_timer }
			remove_mission = SHX_industrial_reform_mission_timer
		}
		set_country_flag = SHX_industrial_reform_completed_flag
		custom_effect_tooltip = SHX_Industry_Reform_Complete_Tooltip
	}
}
country_event = {#我们的工业化之路
	id = shx.industry.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.industry.1" }
	title = shx.industry.1.t
	desc = {
		text = shx.industry.1.warwithQIE
		trigger = { 
			has_war_with = QIE 
		}
	}
	desc = {
		text = shx.industry.1.d_Yan
		trigger = { has_country_flag = SHX_yan_victory_over_gmj }
	}
	desc = {
		text = shx.industry.1.d_Feng
		trigger = { has_country_flag = SHX_feng_victory_over_yan }
	}
	desc = {
		text = shx.industry.1.d_default
		trigger = {
			NOT = { has_war_with = QIE }
			NOT = { has_country_flag = SHX_yan_victory_over_gmj }
			NOT = { has_country_flag = SHX_feng_victory_over_yan }
		}
	}

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		hidden_effect = { activate_mission = SHX_industrial_reform_mission_timer }
	}

	option = {
		name = shx.industry.1.yan
		ai_chance = {
			base = 60
			modifier = {
				factor = 5 #Lock-in: After Oct-1936 SHX should try to be more aggressive in choosing a side
				date > 1936.10.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_yan_is_winning_trigger = yes
			}
			modifier = {
				factor = 3 #Lock-in: After Jan-1936 SHX should try to be more aggressive in choosing a side
				date > 1937.01.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_yan_is_winning_trigger = yes
			}
			modifier = {
				factor = 0 #Lock-in: After Mar-1937 SHX will stop choosing focuses related to the opposite side until the power struggle is won.
				date > 1937.03.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_feng_is_winning_trigger = yes
			}
		}
		trigger = {
			NOT = {
				has_country_flag = SHX_feng_victory_over_yan
				has_war_with = QIE
			}
		}
		hidden_effect = {
			set_country_flag = SHX_favored_yan_industry
			hidden_effect = {
				country_event = { id = shx_mission_tick.2 days = 5 }
			}
		}
		custom_effect_tooltip = SHX_Yan_Favored_10_Year_tooltip
		if = {
			limit = { has_war = yes }
			add_days_mission_timeout = {
				mission = SHX_industrial_reform_mission_timer
				days = 400
			}
			custom_effect_tooltip = SHX_reform_disrupted_by_war_tooltip
		}
		SHX_revolution_small = yes
	}

	option = {
		name = shx.industry.1.feng
		ai_chance = {
			base = 40
			modifier = {
				factor = 5 #Lock-in: After Oct-1936 SHX should try to be more aggressive in choosing a side
				date > 1936.10.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_feng_is_winning_trigger = yes
			}
			modifier = {
				factor = 3 #Lock-in: After Jan-1936 SHX should try to be more aggressive in choosing a side
				date > 1937.01.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_feng_is_winning_trigger = yes
			}
			modifier = {
				factor = 0 #Lock-in: After Mar-1937 SHX will stop choosing focuses related to the opposite side until the power struggle is won.
				date > 1937.03.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_yan_is_winning_trigger = yes
			}
		}
		trigger = {
			OR = {
				NOT = { has_country_flag = SHX_yan_victory_over_gmj }
				has_war_with = QIE
			}
		}
		hidden_effect = {
			set_country_flag = SHX_favored_feng_industry
			hidden_effect = {
				country_event = { id = shx_mission_tick.5 days = 5 }
			}
		}
		custom_effect_tooltip = SHX_Feng_Favored_10_Year_tooltip
		if = {
			limit = { has_war = yes }
			add_days_mission_timeout = {
				mission = SHX_industrial_reform_mission_timer
				days = 400
			}
			custom_effect_tooltip = SHX_reform_disrupted_by_war_tooltip
		}
	}
}
country_event = {#薄利煤矿
	id = shx.industry.2 
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.industry.2" }
	title = shx.industry.2.t
	desc = shx.industry.2.d

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			country_event = { id = shx.industry.3 days = 30 }
		}
	}
	option = {
		name = shx.industry.2.privitize
		ai_chance = {
			base = 30
		}
		trigger = {
			NOT = { has_country_flag = SHX_feng_victory_over_yan }
		}
		SHX_QIE_investment_medium = yes
		SHX_econ_update = yes
		add_ideas = SHX_private_coal
		hidden_effect = {
			country_event = { id = shx.industry.10 days = 15 } #Tung-chi Mining
		}
	}
	option = {
		name = shx.industry.2.regulate
		ai_chance = {
			base = 50
			modifier = {
				factor = 2 #Lock-in: After Oct-1936 SHX should try to be more aggressive in choosing a side
				date > 1936.10.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_yan_is_winning_trigger = yes
			}
			modifier = {
				factor = 3 #Lock-in: After Jan-1936 SHX should try to be more aggressive in choosing a side
				date > 1937.01.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_yan_is_winning_trigger = yes
			}
		}
		SHX_QIE_investment_small = yes
		SHX_econ_update = yes
		SHX_strengthen_yan_small = yes
		add_ideas = SHX_regulate_coal
		hidden_effect = {
			country_event = { id = shx.industry.10 days = 20 } #Tung-chi Mining
		}
	}
	option = {
		name = shx.industry.2.statusquo
		ai_chance = {
			base = 20
			modifier = {
				factor = 2 #Lock-in: After Oct-1936 SHX should try to be more aggressive in choosing a side
				date > 1936.10.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_feng_is_winning_trigger = yes
			}
			modifier = {
				factor = 3 #Lock-in: After Jan-1936 SHX should try to be more aggressive in choosing a side
				date > 1937.01.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_feng_is_winning_trigger = yes
			}
		}
		SHX_strengthen_feng_medium = yes
		add_ideas = SHX_inefficient_coal
	}
}
country_event = {#铁路贪污丑闻！
	id = shx.industry.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.industry.3" }
	title = shx.industry.3.t
	desc = shx.industry.3.d

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			country_event = { id = shx.industry.4 days = 30 } 
		}
	}

	option = {
		name = shx.industry.3.a
		add_stability = -0.10
	}

	option = {
		name = shx.industry.3.b
		add_days_mission_timeout = {
			mission = SHX_industrial_reform_mission_timer
			days = 100
		}
		add_political_power = 50
		SHX_strengthen_feng_medium = yes
	}
}
country_event = {#工会罢工
	id = shx.industry.4
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.industry.4" }
	title = shx.industry.4.t
	desc = shx.industry.4.d

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			country_event = { id = shx.industry.5 days = 30 } 
		}
	}

	option = {
		name = shx.industry.4.a
		ai_chance = {
			base = 50
			modifier = {
				factor = 2 #Lock-in: After Oct-1936 SHX should try to be more aggressive in choosing a side
				date > 1936.10.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_yan_is_winning_trigger = yes
			}
			modifier = {
				factor = 3 #Lock-in: After Jan-1936 SHX should try to be more aggressive in choosing a side
				date > 1937.01.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_yan_is_winning_trigger = yes
			}
		}
		add_political_power = -25
		add_popularity = {
			ideology = syndicalist
			popularity = 0.01
		}
		SHX_revolution_small = yes
		SHX_strengthen_yan_medium = yes
	}

	option = {
		name = shx.industry.4.b
		ai_chance = {
			base = 50
			modifier = {
				factor = 2 #Lock-in: After Oct-1936 SHX should try to be more aggressive in choosing a side
				date > 1936.10.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_feng_is_winning_trigger = yes
			}
			modifier = {
				factor = 3 #Lock-in: After Jan-1936 SHX should try to be more aggressive in choosing a side
				date > 1937.01.01
				has_active_mission = SHX_looming_gmj_coup
				SHX_feng_is_winning_trigger = yes
			}
		}
		add_days_mission_timeout = {
			mission = SHX_industrial_reform_mission_timer
			days = 50
		}
		add_popularity = {
			ideology = radical_socialist
			popularity = 0.07
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.03
		}
		SHX_strengthen_feng_medium = yes
	}
}
country_event = {#巡回表演
	id = shx.industry.5
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.industry.5" }
	title = shx.industry.5.t
	desc = shx.industry.5.d

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			country_event = { id = shx.industry.12 days = 30 }
		}
	}

	option = {
		name = shx.industry.5.a
		add_days_mission_timeout = {
			mission = SHX_industrial_reform_mission_timer
			days = -50
		}
		add_political_power = 30
	}
}
country_event = {#山西开征盐税
	id = shx.industry.6 
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.industry.6" }
	title = shx.industry.6.t
	desc = shx.industry.6.d

	fire_only_once = yes
	is_triggered_only = yes
	trigger = {
		NOT = {
			has_war_with = SHX
		}
	}

	option = { 
		name = shx.industry.6.a
		ai_chance = {
			base = 50
			modifier = {
				factor = 0.25
				SHX_yan_is_winning_trigger = yes
			}
		}
		SHX = {
			country_event = { id = shx.industry.7 days = 10 }
		}
	}

	option = { 
		name = shx.industry.6.b
		ai_chance = {
			base = 50
			modifier = {
				factor = 0.25
				SHX_feng_is_winning_trigger = yes
			}
			modifier = {
				factor = 0
				SHX = {
					has_country_flag = SHX_feng_victory_over_yan
				}
			}
		}
		SHX = {
			country_event = { id = shx.industry.8 days = 10 }
		}
		add_political_power = 25
	}
}
country_event = {#北京对盐税开征进行反击
	id = shx.industry.7
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.industry.7" }
	title = shx.industry.7.t
	desc = shx.industry.7.d

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = shx.industry.7.a
		add_days_mission_timeout = {
			mission = SHX_industrial_reform_mission_timer
			days = 100
		}
		SHX_QIE_spend_small = yes
	}
}
country_event = {#北京的慷慨回应
	id = shx.industry.8
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.industry.8" }
	title = shx.industry.8.t
	desc = shx.industry.8.d

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = shx.industry.8.a
		if = {
			limit = {
				has_active_mission = SHX_looming_gmj_coup
			}
			SHX_strengthen_yan_medium = yes
		}
		else = {
			add_war_support = -0.05
		}
	}
}
country_event = {#处理商贾世家
	id = shx.industry.9
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.industry.9" }
	title = shx.industry.9.t
	desc = shx.industry.9.d

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = shx.industry.9.a
		custom_effect_tooltip = SHX_great_plan_mill_tt
		hidden_effect = {
			set_country_flag = SHX_build_a_mill
		}
	}

	option = {
		name = shx.industry.9.b
		custom_effect_tooltip = SHX_factory_tt
		hidden_effect = {
			set_country_flag = SHX_build_a_factory
		}
	}
}
country_event = {#通济矿业公司
	id = shx.industry.10
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.industry.10" }
	title = shx.industry.10.t
	desc = shx.industry.10.d

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = shx.industry.10.a
		set_country_flag = SHX_private_coal_flag
		custom_effect_tooltip = available_industrial_concern
		show_ideas_tooltip = SHX_tung_chi_mining_concern
	}
}
country_event = {#自然科学研究院
	id = shx.industry.11
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.industry.11" }
	title = shx.industry.11.t
	desc = shx.industry.11.d

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = shx.industry.11.a
		add_resource = {
			type = oil
			amount = 6
			state = 1072
		}
		add_tech_bonus = {
			bonus = 1
			uses = 1
			category = synth_resources
			name = shx_industry.11.t
		}
		add_political_power = -50
	}

	option = {
		name = shx.industry.11.b
		add_tech_bonus = {
			bonus = 0.5
			uses = 1
			category = synth_resources
			name = shx_industry.11.t
		}
	}
}
country_event = {#平民百姓之厂
	id = shx.industry.12
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.industry.12" }
	title = shx.industry.12.t
	desc = shx.industry.12.d

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = shx.industry.12.a
		random_owned_controlled_state = {
			prioritize = { 1072 }
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
}
country_event = {#处理商贾世家
	id = shx.industry.13
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.industry.13" }
	title = shx.industry.13.t
	desc = shx.industry.13.d

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = shx.industry.13.a
		add_war_support = 0.05
	}

	option = {
		name = shx.industry.13.b
		add_stability = 0.10
	}
}
country_event = {#火车轨道
	id = shx.industry.14
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.industry.14" }
	title = shx.industry.14.t
	desc = shx.industry.14.d

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = shx.industry.14.a
		add_ideas = SHX_standardised_railway_gauges
	}

	option = {
		name = shx.industry.14.b
		add_ideas = SHX_narrow_railway_gauges_1
	}
}

########################################
########-       军队          -#########
########################################
country_event = {#邀请外国顾问
	id = shx.mil.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.mil.1" }
	title = shx.mil.1.t
	desc = shx.mil.1.d
	picture = GFX_report_event_SHX_feng_advisors

	fire_only_once = yes
	is_triggered_only = yes 
	
	option = {
		name = shx.mil.1.a
		ai_chance = {
			base = 30
		}
		add_ideas = SHX_russian_aid
		hidden_effect = { set_country_flag = SHX_russian_aid_flag }
		SHX_strengthen_feng_medium = yes
	}

	option = {
		name = shx.mil.1.b
		trigger = {
			NOT = {
				has_war_with = JAP
			}
		}
		ai_chance = {
			base = 25
		}
		add_ideas = SHX_japanese_aid
		hidden_effect = { set_country_flag = SHX_japanese_aid_flag }
		SHX_strengthen_feng_small = yes
	}

	option = {
		name = shx.mil.1.c
		ai_chance = {
			base = 45
		}
		add_ideas = SHX_german_aid
		SHX_strengthen_yan_medium = yes
		hidden_effect = { set_country_flag = SHX_german_aid }
	}
}
country_event = {#政治训导的模式
	id = shx.mil.2 
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.mil.2" }
	title = shx.mil.2.t
	desc = shx.mil.2.d
	picture = GFX_report_event_QIE_zhili_soldiers

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = shx.mil.2.a
		ai_chance = {
			base = 50
		}
		trigger = { 
			has_character = SHX_feng_yuxiang 
		}
		add_ideas = SHX_guominjun_commissars_idea
		add_popularity = {
			ideology = radical_socialist
			popularity = 0.03
		}
		add_popularity = {
			ideology = social_conservative
			popularity = 0.02
		}
		SHX_strengthen_feng_medium = yes
	}

	option = {
		name = shx.mil.2.b
		ai_chance = {
			base = 50
		}
		trigger = { 
			has_character = SHX_yan_xishan 
		}
		add_ideas = SHX_yan_commissars_idea
		add_popularity = {
			ideology = national_populist
			popularity = 0.05
		}
		SHX_strengthen_yan_medium = yes
	}
}
country_event = {#兵农合一
	id = shx.mil.3 
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.mil.3" }
	title = shx.mil.3.t
	desc = shx.mil.3.d
	
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = shx.mil.3.a
		add_manpower = 10000
		add_war_support = -0.05
	}
}
country_event = {#山西省空军构想
	id = shx.mil.4
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.mil.4" }
	title = shx.mil.4.t
	desc = shx.mil.4.d
	
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = shx.mil.4.a  
		add_tech_bonus = {
			name = SHX_study_aircraft_tech
			bonus = 1
			uses = 1
			category = light_air
		}
		air_experience = 25
	}
}

########################################
######-       政治斗争          -#######
########################################
country_event = {#清洗国民军
	id = shx.powerstruggle.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.powerstruggle.3" }
	title = shx.powerstruggle.3.t
	desc = shx.powerstruggle.3.d
	picture = GFX_report_event_SHX_yan_troops

	fire_only_once = yes
	is_triggered_only = yes

	option = { #Good Riddance
		name = shx.powerstruggle.3.a

		promote_character = {
			character = SHX_yan_xishan
			ideology = pataut_yan_xishan_thought_subtype
		}
		add_political_power = 25
		add_stability = 0.10
		clr_country_flag = SHX_yan_feng_split
		add_popularity = {
			ideology = national_populist
			popularity = 0.075
		}
		add_popularity = {
			ideology = market_liberal
			popularity = 0.025
		}

		hidden_effect = {
			if = {
				limit = { has_country_flag = SHX_feng_victory_over_yan }
				clr_country_flag = SHX_feng_victory_over_yan
			}
			set_country_flag = SHX_yan_victory_over_gmj

			add_power_balance_value = {
				id = SHX_power_balance
				value = -2.0
			}

			if = {
				limit = {
					has_country_flag = SHX_Feng_purpose
				}
				clr_country_flag = SHX_Feng_purpose
			}
			set_country_flag = SHX_Yan_purpose
			# uncomplete_national_focus = {
			# 	focus = SHX_socialism
			# 	uncomplete_children = yes
			# }


			SHX = {
				country_event = { id = shx.powerstruggle.5 days = 5 }
				country_event = { id = shx.powerstruggle.7 days = 10 }
				country_event = { id = shx.powerstruggle.8 days = 15 }
			}
		}
	}
}
country_event = {#国民军起义
	id = shx.powerstruggle.4
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.powerstruggle.4" }
	title = shx.powerstruggle.4.t
	desc = shx.powerstruggle.4.d
	picture = GFX_report_event_SHX_guominjun_soldiers

	fire_only_once = yes
	is_triggered_only = yes

	option = { #Finally it is done
		name = shx.powerstruggle.4.a
		clr_country_flag = SHX_yan_feng_split
		add_political_power = 25
		set_politics = {
			ruling_party = authoritarian_democrat
			elections_allowed = no
		}
		add_stability = 0.10
		add_popularity = {
			ideology = social_conservative
			popularity = 0.075
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.025
		}
		hidden_effect = {
			end_coalition = yes

			add_ideas = {
				SHX_He_Qigong_hog_ade
				SHX_Su_Tiren_for_ade
				SHX_Guo_Zhigang_eco_ade
				SHX_Fang_Zhenwu_sec_ade
			}

			if = {
				limit = { has_country_flag = SHX_yan_victory_over_gmj }
				clr_country_flag = SHX_yan_victory_over_gmj
			}
			set_country_flag = SHX_feng_victory_over_yan

			add_power_balance_value = {
				id = SHX_power_balance
				value = 2.0
			}

			if = {
				limit = {
					has_country_flag = SHX_Yan_purpose
				}
				clr_country_flag = SHX_Yan_purpose
			}
			set_country_flag = SHX_Feng_purpose
			# uncomplete_national_focus = {
			# 	focus = SHX_doctrine_of_mean
			# 	uncomplete_children = yes
			# }
			set_country_leader_description = {
				ideology = authoritarian_democrat
				desc = SHX_feng_yuxiang_victory_leader_desc
			}
			SHX = {
				country_event = { id = shx.powerstruggle.5 days = 5 }
				country_event = { id = shx.powerstruggle.7 days = 10 }
				country_event = { id = shx.powerstruggle.8 days = 15 }
			}
		}
		if = {
			limit = { 
				SHX = { 
					is_subject_of = QIE 
				} 
			}
			china_break_puppet_effect = yes
			set_country_flag = SHX_broke_from_qie
			effect_tooltip = {
				QIE = {
					create_wargoal = {
						target = SHX
						type = annex_everything
					}
				}
			}
		}
	}
}
country_event = {#至胜方休
	id = shx.powerstruggle.5
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.powerstruggle.5" }
	title = shx.powerstruggle.5.t
	desc = {
		text = shx.powerstruggle.5.yan.d
		trigger = {
			has_country_flag = SHX_yan_victory_over_gmj
		}
	}
	desc = {
		text = shx.powerstruggle.5.feng.d
		trigger = {
			has_country_flag = SHX_feng_victory_over_yan
		}
	}

	fire_only_once = yes
	is_triggered_only = yes

	option = { #Pardon Feng and his leaders
		name = shx.powerstruggle.5.yan.a
		trigger = {
			has_country_flag = SHX_yan_victory_over_gmj
		}
		ai_chance = { base = 0 }
		SHX_feng_yuxiang = { demote_to_general = yes }
		add_stability = -0.15
		add_political_power = -100
		add_popularity = { 
			ideology = authoritarian_democrat 
			popularity = 0.05 
		}
	}
	option = { #Bye bye Feng
		name = shx.powerstruggle.5.yan.b
		trigger = {
			has_country_flag = SHX_yan_victory_over_gmj
		}
		ai_chance = { base = 100 }
		add_stability = 0.05
		add_political_power = 50
		custom_effect_tooltip = characters_will_be_retired
		character_list_tooltip = {
			limit = {
				OR = {
					is_character = SHX_feng_yuxiang
					is_character = SHX_sun_yue
				}
			}
		}
		hidden_effect = {
			retire_character = SHX_feng_yuxiang
			SHX_sun_yue = {
				remove_unit_leader_role = yes
			}
		}
		add_country_leader_role = {
			character = SHX_yang_hucheng
			country_leader = {
				ideology = authoritarian_democrat_subtype
				desc = SHX_yang_hucheng_country_leader_desc
			}
			promote_leader = yes
		}
		hidden_effect = {
			set_party_name = {
				ideology = authoritarian_democrat
				long_name = SHX_yan_authoritarian_democrat_party_long
				name = SHX_yan_authoritarian_democrat_party
			}
			set_party_name = {
				ideology = social_democrat
				long_name = SHX_yan_social_democrat_party_long
				name = SHX_yan_social_democrat_party
			}
		}
	}
	option = {
		name = shx.powerstruggle.5.feng.a  #Pardon Yan and them
		trigger = {
			has_country_flag = SHX_feng_victory_over_yan
		}
		ai_chance = { base = 0 }
		SHX_yan_xishan = { 
			demote_to_general = yes 
		}
		add_stability = -0.15
		add_political_power = -100
		add_popularity = { 
			ideology = paternal_autocrat 
			popularity = 0.05 
		}
	}
	option = {
		name = shx.powerstruggle.5.feng.b # Don't pardon
		trigger = {
			has_country_flag = SHX_feng_victory_over_yan
		}
		ai_chance = { base = 100 }
		add_stability = 0.05
		add_political_power = 50
		custom_effect_tooltip = characters_will_be_retired
		character_list_tooltip = {
			limit = {
				is_character = SHX_yan_xishan
			}
		}
		hidden_effect = {
			retire_character = SHX_yan_xishan
		}
		add_country_leader_role = {
			character = SHX_fu_zuoyi
			country_leader = {
				ideology = paternal_autocrat_subtype
				desc = SHX_fu_zuoyi_country_leader_desc
			}
			promote_leader = yes
		}
		hidden_effect = {
			set_party_name = {
				ideology = paternal_autocrat
				long_name = SHX_feng_paternal_autocrat_party_long
				name = SHX_feng_paternal_autocrat_party
			}
		}
	}
}	
country_event = {#处理叛徒
	id = shx.powerstruggle.7
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.powerstruggle.7" }
	title = shx.powerstruggle.7.t
	desc = {
		text = shx.powerstruggle.7.yan.d
		trigger = {
			has_country_flag = SHX_yan_victory_over_gmj
		}
	}
	desc = {
		text = shx.powerstruggle.7.feng.d
		trigger = {
			has_country_flag = SHX_feng_victory_over_yan
		}
	}

	fire_only_once = yes
	is_triggered_only = yes

	option = { #Forgive and forget
		name = shx.powerstruggle.7.yan.a
		trigger = {
			has_country_flag = SHX_yan_victory_over_gmj
		}
		ai_chance = { base = 0 }
		add_political_power = -100
		add_stability = -0.1
		add_popularity = { ideology = authoritarian_democrat popularity = 0.05 }
	}
	option = { # PURGE
		name = shx.powerstruggle.7.yan.b
		trigger = {
			has_country_flag = SHX_yan_victory_over_gmj
		}
		ai_chance = { base = 100 }
		add_political_power = 50
		add_stability = 0.1
	}
	option = { #Forgive and forget
		log = "[GetLogInfo]: event shx.powerstruggle.7 option shx.powerstruggle.7.feng.a"
		name = shx.powerstruggle.7.feng.a
		trigger = {
			has_country_flag = SHX_feng_victory_over_yan
		}
		ai_chance = { base = 0 }
		add_political_power = -100
		add_stability = -0.1
		add_popularity = { ideology = paternal_autocrat popularity = 0.05 }
	}
	option = { # PURGE
		log = "[GetLogInfo]: event shx.powerstruggle.7 option shx.powerstruggle.7.feng.b"
		name = shx.powerstruggle.7.feng.b
		trigger = {
			has_country_flag = SHX_feng_victory_over_yan
		}
		ai_chance = { base = 100 }
		add_political_power = 50
		add_stability = 0.1
	}
}
country_event = {#败军之将
	id = shx.powerstruggle.8
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.powerstruggle.8" }
	title = shx.powerstruggle.8.t
	desc = {
		text = shx.powerstruggle.8.yan.d
		trigger = {
			has_country_flag = SHX_yan_victory_over_gmj
		}
	}
	desc = {
		text = shx.powerstruggle.8.feng.d
		trigger = {
			has_country_flag = SHX_feng_victory_over_yan
		}
	}

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Forgiveness is a virtue
		log = "[GetLogInfo]: event shx.powerstruggle.8 option shx.powerstruggle.8.yan.a"
		name = shx.powerstruggle.8.yan.a
		trigger = {
			has_country_flag = SHX_yan_victory_over_gmj
		}
		ai_chance = { base = 0 }
		add_political_power = -100
		add_popularity = { ideology = authoritarian_democrat popularity = 0.05 }
	}
	option = { #BUT WE SHALL NOT EXERCISE IT
		log = "[GetLogInfo]: event shx.powerstruggle.8 option shx.powerstruggle.8.yan.b"
		name = shx.powerstruggle.8.yan.b
		trigger = {
			has_country_flag = SHX_yan_victory_over_gmj
		}
		ai_chance = { base = 100 }
		add_political_power = 100
		add_stability = 0.2 #Yan gets a bit more stab since weaker generals
		add_command_power = 50 #Yan has so few generals he'll definitely need this
		SHX_feng_army_purged = yes
	}
	option = { #Forgiveness is a virtue
		log = "[GetLogInfo]: event shx.powerstruggle.8 option shx.powerstruggle.8.feng.a"
		name = shx.powerstruggle.8.feng.a
		ai_chance = { base = 0 }
		trigger = {
			has_country_flag = SHX_feng_victory_over_yan
		}
		add_political_power = -100
		add_popularity = { ideology = paternal_autocrat popularity = 0.05 }
	}
	option = { #BUT WE SHALL NOT EXERCISE IT
		log = "[GetLogInfo]: event shx.powerstruggle.8 option shx.powerstruggle.8.feng.b"
		name = shx.powerstruggle.8.feng.b
		ai_chance = { base = 100 }
		trigger = {
			has_country_flag = SHX_feng_victory_over_yan
		}
		SHX_yan_army_purged = yes
		SHX_shang_zhen = {
			remove_unit_leader_trait = SHX_yan_loyalist
		}
		custom_effect_tooltip = SHX_characters_will_added_to_MHC
		add_stability = 0.1
		add_political_power = 100
	}
}
country_event = {#再续旧盟
	id = shx.powerstruggle.9
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.powerstruggle.9" }
	title = shx.powerstruggle.9.t
	desc = shx.powerstruggle.9.d
	picture = GFX_report_event_SHX_feng_and_yan_2

	fire_only_once = yes
	is_triggered_only = yes 

	option = {
		name = shx.powerstruggle.9.a
		remove_ideas = SHX_guominjun_unrest_idea
		remove_power_balance = { id = SHX_power_balance }
		add_stability = 0.10
		clr_country_flag = SHX_yan_feng_split
		set_country_flag = SHX_yan_victory_over_gmj
		set_country_flag = SHX_renewed_alliance_outcome_flag
		log = "KR_Event_Logging;SHX Game Progression - Yan Xishan, Renewed Alliance, Survived Independent;[GetDateText]"
		add_popularity = {
			ideology = social_democrat
			popularity = -0.10
		}
		add_popularity = {
			ideology = radical_socialist
			popularity = -0.10
		}
		add_popularity = {
			ideology = market_liberal
			popularity = -0.20
		}
		add_authdem_to_coalition = yes
		SHX_convert_influence_to_war_support_effect = yes
	}
}
country_event = {#晋军流亡者抵达
	id = shx.powerstruggle.10
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.powerstruggle.10" }
	title = shx.powerstruggle.10.t
	desc = shx.powerstruggle.10.d
	picture = GFX_report_event_SHX_guominjun_soldiers

	fire_only_once = yes
	is_triggered_only = yes 

	option = { #Defenders of Order
		name = shx.powerstruggle.10.a
		trigger = { SHX = { has_country_flag = SHX_feng_victory_over_yan } }
		ai_chance = { base = 100 }
		add_political_power = -50
		add_manpower = 1000
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = 100
			producer = SHX
		}
	}

	option = { #Arrest those fugitives at once!
		name = shx.powerstruggle.10.b
		ai_chance = { base = 0 } #I mean, why?
		reverse_add_opinion_modifier = {
			target = SHX
			modifier = KR_pleased
		}
		every_unit_leader = {
			limit = {
				OR = {
					has_trait = SHX_yan_loyalist
					has_trait = SHX_gmj_officer
				}
			}
			remove_unit_leader_role = yes
		}
	}
}
country_event = {#国民军残部抵达
	id = shx.powerstruggle.12
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.powerstruggle.12" }
	title = shx.powerstruggle.12.t
	desc = shx.powerstruggle.12.d

	fire_only_once = yes
	is_triggered_only = yes 

	option = {
		name = shx.powerstruggle.12.a
		add_political_power = -20
	}
}

########################################
########-       直奉          -#########
########################################
country_event = {#阎锡山平定陕西！
	id = shx.zhifeng.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.zhifeng.1" }
	title = shx.zhifeng.1.t
	desc = shx.zhifeng.1.d
	picture = GFX_report_event_SHX_yanan_street

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = shx.zhifeng.1.a 
		add_political_power = 30
		SHX = {
			SHX_QIE_investment_small = yes
		}
		add_opinion_modifier = { 
			target = SHX 
			modifier = KR_approves_of_govt 
		}
	}
}
country_event = {#山西省府倒台！
	id = shx.zhifeng.2 
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.zhifeng.2" }
	title = shx.zhifeng.2.t
	desc = shx.zhifeng.2.d
	picture = GFX_report_event_SHX_feng

	fire_only_once = yes
	is_triggered_only = yes 

	option = {
		name = shx.zhifeng.2.a 
		add_political_power = -25
		SHX = {
			SHX_QIE_spend_large = yes
			add_opinion_modifier = { 
				target = QIE 
				modifier = KR_outraged 
			}
		}
		add_opinion_modifier = { 
			target = SHX 
			modifier = KR_hostile 
		}
		if = {
			limit = { 
				SHX = { 
					has_country_flag = SHX_broke_from_qie 
				} 
			}
			set_country_flag = china_revolted_against_@FROM
			add_ai_strategy = {
				type = contain
				id = SHX
				value = 200
			}
			add_ai_strategy = {
				type = antagonize
				id = SHX
				value = 200
			}
			effect_tooltip = { 
				SHX = { 
					china_break_puppet_effect = yes 
				} 
			}
			create_wargoal = {
				target = SHX
				type = annex_everything
			}
		}
	}
}

########################################
######-       大清影响力        -#######
########################################
country_event = {#太原火车谈判脱轨
	id = shx.QIE.aid.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.QIE.aid.1" }
	title = shx.QIE.aid.1.t
	desc = shx.QIE.aid.1.d
	picture = GFX_report_event_SHX_zhengtai_railway

	fire_only_once = yes
	is_triggered_only = yes 

	option = {
		name = shx.QIE.aid.1.a 

	}
}
country_event = {#太原回电
	id = shx.QIE.aid.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.QIE.aid.2" }
	title = shx.QIE.aid.2.t
	desc = shx.QIE.aid.2.d

	fire_only_once = yes
	is_triggered_only = yes 

	option = {
		name = shx.QIE.aid.2.a 
		country_event = shx.QIE.aid.3
	}

	option = {
		name = shx.QIE.aid.2.b 
		custom_effect_tooltip = SHX_QIE_telegram_tooltip
	}
}
country_event = {#北京在山西的利益（介绍）
	id = shx.QIE.aid.3 
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.QIE.aid.3" }
	title = shx.QIE.aid.3.t
	desc = shx.QIE.aid.3.d
	picture = GFX_report_event_SHX_shanxi_provincal_bank

	fire_only_once = yes
	is_triggered_only = yes 

	option = {
		name = shx.QIE.aid.3.a
		custom_effect_tooltip = SHX_QIE_telegram_tooltip
	}
}
country_event = {#黑色星期一救济一揽子协议
	id = shx.QIE.aid.5 
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.QIE.aid.5" }
	title = shx.QIE.aid.5.t
	desc = shx.QIE.aid.5.d
	picture = GFX_report_event_SHX_shanxi_provincal_bank

	fire_only_once = yes
	is_triggered_only = yes 

	option = {
		name = shx.QIE.aid.5.a 
		ai_chance = {
			base = 50
			modifier = {
				factor = 1.2
				check_variable = { SHX_QIE_influence_variable < 15 }
			}
			modifier = {
				factor = 1.2
				check_variable = { SHX_QIE_influence_variable < 30 }
			}
			modifier = {
				factor = 0.8
				check_variable = { SHX_QIE_influence_variable > 45 }
			}
			modifier = {
				factor = 0.8
				check_variable = { SHX_QIE_influence_variable > 60 }
			}
			modifier = {
				factor = 0.5
				check_variable = { SHX_QIE_influence_variable > 75 }
			}
		}
		SHX_QIE_investment_medium = yes
		add_timed_idea = {
			idea = SHX_black_monday_relief
			days = 365
		}
	}

	option = {
		name = shx.QIE.aid.5.b
		ai_chance = {
			base = 50
			modifier = {
				factor = 1.2
				has_political_power > 50
			}
			modifier = {
				factor = 1.2
				has_political_power > 100
			}
			modifier = {
				factor = 0.8
				has_political_power < 50
			}
			modifier = {
				factor = 0.8
				has_political_power < 25
			}
			modifier = {
				factor = 0.5
				has_political_power < 0
			}
		}
		set_country_flag = SHX_reject_BM_relief
		add_political_power = -25
		SHX_strengthen_feng_small = yes
		SHX_revolution_small = yes
		hidden_effect = {
			QIE = {
				country_event = { id = shx.QIE.aid.13 days = 1 }
			}
		}
	}
}
country_event = {#山西拒绝黑色星期一救济
	id = shx.QIE.aid.13
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.QIE.aid.13" }
	title = shx.QIE.aid.13.t
	desc = shx.QIE.aid.13.d
	picture = GFX_report_event_SHX_yan_formal

	fire_only_once = yes
	is_triggered_only = yes 

	option = {
		name = shx.QIE.aid.13.a
		add_political_power = -5
	}
}

########################################
########-       其他          -#########
########################################
country_event = {#太原为西北暂停与我们合作
	id = shx.suiyuan.campaign.60
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.suiyuan.campaign.60" }
	title = shx.suiyuan.campaign.60.t
	desc = shx.suiyuan.campaign.60.d
	picture = GFX_report_event_SHX_yan_speech

	fire_only_once = yes
	is_triggered_only = yes 

	option = {
		name = shx.suiyuan.campaign.60.a
		create_wargoal = {
			type = puppet_wargoal_focus
			target = SHX
		}
	}
	option = {
		name = shx.suiyuan.campaign.60.b
	}
}

########################################
#######-       hidden          -########
########################################
country_event = {
	id = shx_mission_tick.1 #Tick for Feng Education Missions
	title = shx_mission_tick.1.t
	desc = shx_mission_tick.1.d
	is_triggered_only = yes
	hidden = yes
	trigger = {
		NOT = {
			has_country_flag = SHX_educational_reform_completed_flag
			has_country_flag = SHX_yan_victory_over_gmj
			has_country_flag = SHX_feng_victory_over_yan
		}
	}
	option = {
		log = "[GetLogInfo]: event shx_mission_tick.1 option shx_mission_tick.1.a"
		name = shx_mission_tick.1.a
		if = {
			limit = { NOT = { has_country_flag = SHX_education_for_all_completed } }
			activate_mission = Feng_taking_SHX_education_for_all
		}
		else_if = {
			limit = { NOT = { has_country_flag = SHX_increase_school_taxes_completed } }
			activate_mission = Feng_taking_increase_school_taxes
		}
		else_if = {
			limit = { NOT = { has_country_flag = SHX_feng_womens_education_completed } }
			activate_mission = Feng_taking_womens_education
		}
		else_if = {
			limit = { NOT = { has_country_flag = SHX_clamp_down_traditional_roles_completed } }
			activate_mission = Feng_taking_clamp_down_traditional_roles
		}
	}
}
country_event = {
	id = shx_mission_tick.2 #Tick for Feng Industry Missions
	title = shx_mission_tick.2.t
	desc = shx_mission_tick.2.d
	is_triggered_only = yes
	hidden = yes
	trigger = {
		NOT = {
			has_country_flag = SHX_industrial_reform_completed_flag
			has_country_flag = SHX_yan_victory_over_gmj
			has_country_flag = SHX_feng_victory_over_yan
		}
	}
	option = {
		log = "[GetLogInfo]: event shx_mission_tick.2 option shx_mission_tick.2.a"
		name = shx_mission_tick.2.a
		if = {
			limit = { NOT = { has_country_flag = SHX_shanxi_solutions_completed } }
			activate_mission = SHX_feng_taking_shanxi_solutions
		}
		else_if = {
			limit = { NOT = { has_country_flag = SHX_feng_taking_utilize_banks_completed } }
			activate_mission = SHX_feng_taking_utilize_banks
		}
		else_if = {
			limit = { NOT = { has_country_flag = SHX_manage_monopolies_completed } }
			activate_mission = SHX_feng_taking_manage_monopolies
		}
		else_if = {
			limit = { NOT = { has_country_flag = SHX_feng_taking_economic_controls_completed } }
			activate_mission = SHX_feng_taking_economic_controls
		}
	}
}
country_event = {
	id = shx_mission_tick.3 #Tick for Feng Agriculuture Missions
	title = shx_mission_tick.3.t
	desc = shx_mission_tick.3.d
	is_triggered_only = yes
	hidden = yes
	trigger = {
		NOT = {
			has_country_flag = SHX_agricultural_reform_completed_flag
			has_country_flag = SHX_yan_victory_over_gmj
			has_country_flag = SHX_feng_victory_over_yan
		}
	}
	option = {
		log = "[GetLogInfo]: event shx_mission_tick.3 option shx_mission_tick.3.a"
		name = shx_mission_tick.3.a
		if = {
			limit = { NOT = { has_country_flag = SHX_peasant_deal_completed } }
			activate_mission = SHX_feng_taking_SHX_peasant_deal
		}
		else_if = {
			limit = { NOT = { has_country_flag = SHX_control_peasants_completed } }
			activate_mission = SHX_feng_taking_SHX_control_peasants
		}
		else_if = {
			limit = { NOT = { has_country_flag = SHX_feng_taking_SHX_unfair_rent_completed } }
			activate_mission = SHX_feng_taking_SHX_unfair_rent
		}
		else_if = {
			limit = { NOT = { has_country_flag = SHX_feng_taking_SHX_building_Villages_completed } }
			activate_mission = SHX_feng_taking_SHX_building_villages
		}
	}
}
country_event = {
	id = shx_mission_tick.4 #Tick for Yan Education Missions
	title = shx_mission_tick.4.t
	desc = shx_mission_tick.4.d
	is_triggered_only = yes
	hidden = yes
	trigger = {
		NOT = {
			has_country_flag = SHX_educational_reform_completed_flag
			has_country_flag = SHX_yan_victory_over_gmj
			has_country_flag = SHX_feng_victory_over_yan
		}
	}
	option = {
		log = "[GetLogInfo]: event shx_mission_tick.4 option shx_mission_tick.4.a"
		name = shx_mission_tick.4.a
		if = {
			limit = { NOT = { has_country_flag = SHX_yan_emphasise_higher_education_completed } }
			activate_mission = Yan_taking_emphasise_higher_education
		}
		else_if = {
			limit = { NOT = { has_country_flag = SHX_yan_crack_down_on_corruption_completed } }
			activate_mission = Yan_taking_crack_down_on_corruption
		}
		else_if = {
			limit = { NOT = { has_country_flag = SHX_yan_foreign_experts_completed } }
			activate_mission = Yan_taking_foreign_experts
		}
		else_if = {
			limit = { NOT = { has_country_flag = SHX_yan_cultivate_foreign_aid_connections_completed } }
			activate_mission = Yan_taking_cultivate_foreign_aid_connections
		}
	}
}
country_event = {
	id = shx_mission_tick.5 #Tick for Yan Industry Missions
	title = shx_mission_tick.5.t
	desc = shx_mission_tick.5.d
	is_triggered_only = yes
	hidden = yes
	trigger = {
		NOT = {
			has_country_flag = SHX_industrial_reform_completed_flag
			has_country_flag = SHX_yan_victory_over_gmj
			has_country_flag = SHX_feng_victory_over_yan
		}
	}
	option = {
		log = "[GetLogInfo]: event shx_mission_tick.5 option shx_mission_tick.5.a"
		name = shx_mission_tick.5.a
		if = {
			limit = { NOT = { has_country_flag = SHX_yan_taking_seek_outside_capital_completed } }
			activate_mission = SHX_yan_taking_seek_outside_capital
		}
		else_if = {
			limit = { NOT = { has_country_flag = SHX_yan_taking_wave_of_foreign_capital_completed } }
			activate_mission = SHX_yan_taking_wave_of_foreign_capital
		}
		else_if = {
			limit = { NOT = { has_country_flag = SHX_yan_taking_mass_privatization_completed } }
			activate_mission = SHX_yan_taking_mass_privatization
		}
		else_if = {
			limit = { NOT = { has_country_flag = SHX_yan_taking_modern_equipment_completed } }
			activate_mission = SHX_yan_taking_modern_equipment
		}
	}
}
country_event = {
	id = shx_mission_tick.6 #Tick for Yan Agriculuture Missions
	title = shx_mission_tick.6.t
	desc = shx_mission_tick.6.d
	is_triggered_only = yes
	hidden = yes
	trigger = {
		NOT = {
			has_country_flag = SHX_agricultural_reform_completed_flag
			has_country_flag = SHX_yan_victory_over_gmj
			has_country_flag = SHX_feng_victory_over_yan
		}
	}
	option = {
		log = "[GetLogInfo]: event shx_mission_tick.6 option shx_mission_tick.6.a"
		name = shx_mission_tick.6.a
		if = {
			limit = { NOT = { has_country_flag = yan_taking_SHX_gentry_deal_completed } }
			activate_mission = SHX_yan_taking_SHX_gentry_deal
		}
		else_if = {
			limit = { NOT = { has_country_flag = yan_taking_SHX_control_gentry_completed } }
			activate_mission = SHX_yan_taking_SHX_control_gentry
		}
		else_if = {
			limit = { NOT = { has_country_flag = yan_taking_SHX_litigation_completed } }
			activate_mission = SHX_yan_taking_SHX_litigation
		}
		else_if = {
			limit = { NOT = { has_country_flag = yan_taking_SHX_empower_magistrates_completed } }
			activate_mission = SHX_yan_taking_empower_magistrates
		}
	}
}

########################################
########-      旧事件         -#########
########################################

country_event = { # Feng ups recruitment due to fear of lep collapse
	id = shx.7
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.7" }
	title = shx.7.t
	desc = shx.7.d
	picture = GFX_report_event_QIE_soldiers_mobilize
	is_triggered_only = yes

	trigger = {
		has_idea = SHX_power_struggle
	}

	option = {
		name = shx.7.a
		add_war_support = 0.02
		set_temp_variable = { SHX_yuxiang_mil_change = 2 }
		SHX_add_yuxiang_mil = yes
		hidden_effect = {
			country_event = { id = shx.8 days = 13 }
		}
	}
}

country_event = { # Yan speaks to Feng about his military rearmament
	id = shx.8
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.8" }
	title = shx.8.t
	desc = shx.8.d
	picture = GFX_report_event_QIE_soldiers_mobilize
	is_triggered_only = yes

	trigger = {
		has_idea = SHX_power_struggle
	}

	option = {
		name = shx.8.a
		add_war_support = -0.05
		set_temp_variable = { SHX_xishan_mil_change = 5 }
		SHX_add_xishan_mil = yes
		hidden_effect = {
			country_event = { id = shx.10 days = 28 }
		}
	}
}
country_event = { # Feng holds meeting with local government officials, bribery involved most likley
	id = shx.10
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.10" }
	title = shx.10.t
	desc = shx.10.d
	picture = GFX_report_event_CHI_warlords
	is_triggered_only = yes

	trigger = {
		has_idea = SHX_power_struggle
	}

	option = {
		name = shx.10.a
		add_political_power = -15
		set_temp_variable = { SHX_yuxiang_gov_change = 5 }
		SHX_add_yuxiang_gov = yes
	}
}

country_event = { # peasants in north Jinxi protest against German companies mining into Shanxi
	id = shx.13
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.13" }
	title = shx.13.t
	desc = shx.13.d
	picture = GFX_report_event_BEL_Protest
	is_triggered_only = yes

	trigger = {
		has_idea = SHX_power_struggle
	}

	option = { #angery
		name = shx.13.a
		add_stability = -0.05
		set_temp_variable = { SHX_yuxiang_gov_change = 5 }
		SHX_add_yuxiang_gov = yes
		hidden_effect = {
			country_event = { id = shx.14 days = 21 }
		}
	}
}

country_event = { # Feng says he will take some troops and deal with the peasants protests
	id = shx.14
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.14" }
	title = shx.14.t
	desc = shx.14.d
	picture = GFX_report_event_BEL_Protest
	is_triggered_only = yes

	trigger = {
		has_idea = SHX_power_struggle
	}

	option = { #Feng
		name = shx.14.a
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				has_game_rule = { rule = SHX_struggle option = SHX_STRUGGLE_YAN }
			}
		}
		hidden_effect = {
			country_event = { id = shx.15 days = 14 }
		}
	}
	option = { #Not Feng
		name = shx.14.b
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SHX_struggle option = SHX_STRUGGLE_FENG_JOIN_THE_FRAY }
					has_game_rule = { rule = SHX_struggle option = SHX_STRUGGLE_FENG_FENGS_CRUSADE }
				}
			}
		}
		hidden_effect = {
			country_event = { id = shx.50 days = 14 }
		}
	}
}

country_event = { # After rising anger about the German companies, Feng is able to put down the protests, with minimal deaths cus of his convincingness
	id = shx.15
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.15" }
	title = shx.15.t
	desc = shx.15.d
	picture = GFX_report_event_CAN_protest
	is_triggered_only = yes

	trigger = {
		has_idea = SHX_power_struggle
	}

	option = { #
		name = shx.15.a
		add_stability = 0.02
		add_war_support = 0.02
		set_temp_variable = { SHX_yuxiang_gov_change = 10 }
		SHX_add_yuxiang_gov = yes
		hidden_effect = {
			country_event = { id = shx.21 days = 25 }
		}
	}
}

country_event = { # Feng hosts dinner for his generals (zhang, sun and han)(not Yan)
	id = shx.21
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.21" }
	title = shx.21.t
	desc = shx.21.d
	picture = GFX_report_event_LEC_xiangshen
	is_triggered_only = yes

	trigger = {
		has_idea = SHX_power_struggle
	}

	option = { # Yans invite must've been lost in the mail
		name = shx.21.a
		set_temp_variable = { SHX_yuxiang_mil_change = 2 }
		SHX_add_yuxiang_mil = yes
		hidden_effect = {
			country_event = { id = shx.22 days = 32 }
		}
	}
}

country_event = { # German company approaches us about mining into Jinxi, pretty corrupt shit yo
	id = shx.22
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.22" }
	title = shx.22.t
	desc = shx.22.d
	picture = GFX_report_event_SIA_German_Economical_Dominance
	is_triggered_only = yes

	trigger = {
		has_idea = SHX_power_struggle
	}

	option = { # take the deal
		name = shx.22.a
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				has_game_rule = { rule = SHX_struggle option = SHX_STRUGGLE_YAN }
			}
		}
		add_offsite_building = { type = industrial_complex level = 1 }
		hidden_effect = {
			country_event = { id = shx.23 days = 20 }
		}
	}

	option = { # no corruption here pls
		name = shx.22.b
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SHX_struggle option = SHX_STRUGGLE_FENG_JOIN_THE_FRAY }
					has_game_rule = { rule = SHX_struggle option = SHX_STRUGGLE_FENG_FENGS_CRUSADE }
				}
			}
		}
		add_political_power = 10
		hidden_effect = {
			country_event = { id = shx.25 days = 38 }
		}
	}
}

country_event = { # People outraged by german company in Jinxi
	id = shx.23
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.23" }
	title = shx.23.t
	desc = shx.23.d
	picture = GFX_report_event_SIA_German_Economical_Dominance
	is_triggered_only = yes

	trigger = {
		has_idea = SHX_power_struggle
	}

	option = { #
		name = shx.23.a
		add_stability = -0.05
		set_temp_variable = { SHX_yuxiang_gov_change = 5 }
		SHX_add_yuxiang_gov = yes
		hidden_effect = {
			country_event = { id = shx.24 days = 3 }
		}
	}
}

country_event = { # Yuxiang denounces German companies in Jinxi
	id = shx.24
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.24" }
	title = shx.24.t
	desc = shx.24.d
	picture = GFX_report_event_SIA_German_Economical_Dominance
	is_triggered_only = yes

	trigger = {
		has_idea = SHX_power_struggle
	}

	option = { #
		name = shx.24.a
		add_political_power = -25
		set_temp_variable = { SHX_yuxiang_gov_change = 5 }
		SHX_add_yuxiang_gov = yes
		hidden_effect = {
			country_event = { id = shx.25 days = 15 }
		}
	}
}

country_event = { # High level officer caught smoking opium in drug house
	id = shx.25
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.25" }
	title = shx.25.t
	desc = shx.25.d
	picture = GFX_report_event_SIK_uyghur_family
	is_triggered_only = yes

	trigger = {
		has_idea = SHX_power_struggle
	}

	option = { # Arrrest him
		name = shx.25.a
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SHX_struggle option = SHX_STRUGGLE_FENG_JOIN_THE_FRAY }
					has_game_rule = { rule = SHX_struggle option = SHX_STRUGGLE_FENG_FENGS_CRUSADE }
				}
			}
		}
		add_war_support = -0.05
		hidden_effect = {
			country_event = { id = shx.27 days = 25 }
		}
	}

	option = { # Dont arrest him
		name = shx.25.b
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				has_game_rule = { rule = SHX_struggle option = SHX_STRUGGLE_YAN }
			}
		}
		hidden_effect = {
			country_event = { id = shx.26 days = 12 }
		}
	}
}

country_event = { # Drug thing causes massive controversy in government
	id = shx.26
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.26" }
	title = shx.26.t
	desc = shx.26.d
	picture = GFX_report_event_SIK_uyghur_family
	is_triggered_only = yes

	trigger = {
		has_idea = SHX_power_struggle
	}

	option = { #
		name = shx.26.a
		add_political_power = -25
		set_temp_variable = { SHX_yuxiang_gov_change = 5 }
		SHX_add_yuxiang_gov = yes
		hidden_effect = {
			country_event = { id = shx.27 days = 25 }
		}
	}
}

country_event = { # Yuxiang brings aid to poor village
	id = shx.27
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.27" }
	title = shx.27.t
	desc = shx.27.d
	picture = GFX_report_event_GER_hungry_people
	is_triggered_only = yes

	trigger = {
		has_idea = SHX_power_struggle
	}

	option = { # Stop him from being nice lad
		name = shx.27.a
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SHX_struggle option = SHX_STRUGGLE_FENG_JOIN_THE_FRAY }
					has_game_rule = { rule = SHX_struggle option = SHX_STRUGGLE_FENG_FENGS_CRUSADE }
				}
			}
		}
		add_political_power = -25
		add_stability = -0.02
		set_temp_variable = { SHX_yuxiang_gov_change = 5 }
		SHX_add_yuxiang_gov = yes
		hidden_effect = {
			country_event = { id = shx.28 days = 15 }
		}
	}

	option = { # let him do as he wants
		name = shx.27.b
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				has_game_rule = { rule = SHX_struggle option = SHX_STRUGGLE_YAN }
			}
		}
		add_stability = 0.05
		set_temp_variable = { SHX_yuxiang_gov_change = 10 }
		SHX_add_yuxiang_gov = yes
		hidden_effect = {
			country_event = { id = shx.28 days = 15 }
		}
	}
}

country_event = { # Yuxiang speaks with Shaanxi governor
	id = shx.28
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.28" }
	title = shx.28.t
	desc = shx.28.d
	picture = GFX_report_event_SQI_red_spears_2
	is_triggered_only = yes

	trigger = {
		has_idea = SHX_power_struggle
	}

	option = { #
		name = shx.28.a
		set_temp_variable = { SHX_yuxiang_gov_change = 5 }
		SHX_add_yuxiang_gov = yes
		hidden_effect = {
			country_event = { id = shx.29 days = 25 }
		}
	}
}

country_event = { # new military policy: reduce funding or increase it?
	id = shx.29
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.29" }
	title = shx.29.t
	desc = shx.29.d
	picture = GFX_report_event_SQI_red_spears_2
	is_triggered_only = yes

	trigger = {
		has_idea = SHX_power_struggle
	}

	option = { # keep it decently low
		name = shx.29.a
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SHX_struggle option = SHX_STRUGGLE_FENG_JOIN_THE_FRAY }
					has_game_rule = { rule = SHX_struggle option = SHX_STRUGGLE_FENG_FENGS_CRUSADE }
				}
			}
		}
		add_stability = 0.02
		add_war_support = -0.05
		set_temp_variable = { SHX_xishan_mil_change = 2 }
		SHX_add_xishan_mil = yes
	}

	option = { # increase it
		name = shx.29.b
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				has_game_rule = { rule = SHX_struggle option = SHX_STRUGGLE_YAN }
			}
		}
		add_stability = -0.05
		add_war_support = 0.02
		set_temp_variable = { SHX_yuxiang_mil_change = 2 }
		SHX_add_yuxiang_mil = yes
	}
}

country_event = { #Shanxi Moves Troops into Gansu
	id = shx.31
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.31" }
	title = shx.31.t
	desc = shx.31.d
	picture = GFX_report_event_USA_desert_battle
	is_triggered_only = yes

	option = {
		name = shx.31.a #We can't afford another war
		ai_chance = {
			factor = 70
		}
		hidden_effect = {
			FROM = {
				country_event = {
					id = shx.32
					days = 1
				}
			}
		}
	}

	option = {
		name = shx.31.b #Resist the traitors
		ai_chance = {
			factor = 30
		}
		hidden_effect = {
			FROM = {
				country_event = {
					id = shx.33
					days = 1
				}
			}
		}
	}
}

country_event = { # The Mas Surrender
	id = shx.32
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.32" }
	title = shx.32.t
	desc = shx.32.d
	picture = GFX_report_event_FNG_prisoner
	is_triggered_only = yes

	option = {
		name = shx.32.a
		transfer_state = 283
	}
}

country_event = { # The Mas Resist
	id = shx.33
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.33" }
	title = shx.33.t
	desc = shx.33.d
	picture = GFX_report_event_MAF_boer_war
	is_triggered_only = yes

	option = {
		name = shx.33.a #Declare war
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				is_in_faction = yes
			}
			modifier = {
				factor = 0
				FROM = { is_in_faction = yes }
			}
		}
		declare_war_on = {
			target = FROM
			type = take_state
			generator = { 283 }
		}
	}
	option = {
		name = shx.33.a #Back down
		ai_chance = {
			factor = 20
		}
		add_political_power = -50
		set_temp_variable = { SHX_yuxiang_mil_change = 10 }
		SHX_add_yuxiang_mil = yes
	}
}
country_event = { #Miners put down - Feng not happy with bloody mess left
	id = shx.50
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.50" }
	title = shx.50.t
	desc = shx.50.d
	picture = GFX_report_event_ITA_venice_rebels
	is_triggered_only = yes

	trigger = {
		has_idea = SHX_power_struggle
	}

	option = {
		name = shx.50.a
		add_stability = -0.05
		add_war_support = -0.05
		set_temp_variable = { SHX_yuxiang_gov_change = 5 }
		SHX_add_yuxiang_gov = yes
		hidden_effect = {
			country_event = { id = shx.21 days = 25 }
		}
	}
}

country_event = { # Feng Takes Over
	id = shx.63
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.63" }
	title = shx.63.t
	desc = shx.63.d
	picture = GFX_report_event_CHI_warlords
	is_triggered_only = yes

	trigger = {
		has_idea = SHX_power_struggle
	}

	option = {
		name = shx.63.a
		set_politics = {
			ruling_party = radical_socialist
			elections_allowed = no
		}
		remove_ideas = SHX_power_struggle
		hidden_effect = {
			remove_all_ministers = yes
			set_country_flag = SHX_Feng_in_power
			remove_ideas = {
				SHX_yan_xishan_thought_1
				SHX_yan_xishan_thought_2
				SHX_yan_xishan_thought_3
				SHX_yan_xishan_thought_4
				SHX_yan_xishan_thought_5
				SHX_yan_xishan_thought_6
				SHX_yan_xishan_thought_7
				SHX_yan_xishan_thought_8
				SHX_yan_xishan_thought_9
				SHX_yan_xishan_thought_10
				SHX_yan_xishan_thought_11
				SHX_yan_xishan_thought_12
				SHX_yan_xishan_thought_13
				SHX_yan_xishan_thought_14
				SHX_yan_xishan_thought_15
			}
		}
		add_ideas = {
			SHX_He_Qigong_hog_ade
			SHX_Su_Tiren_for_ade
			SHX_Guo_Zhigang_eco_ade
			SHX_Fang_Zhenwu_sec_ade
		}
	}
}

country_event = { #Feng Yuxiang wants an alliance
	id = shx.64
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.64" }
	title = shx.64.t
	desc = shx.64.d
	picture = GFX_report_event_AUS_Ausgleich_dip_agree
	is_triggered_only = yes

	option = {
		name = shx.64.a
		if = {
			limit = { is_faction_leader = yes }
			add_to_faction = FROM
		}
		else = {
			give_guarantee = FROM
		}
		FROM = {
			set_country_flag = SHX_alliance_@ROOT
			country_event = {
				id = shx.65
				days = 2
			}
		}
	}

	option = {
		name = shx.64.b
		trigger = {
			is_ai = no
		}
		FROM = {
			country_event = {
				id = shx.65
				days = 2
			}
		}
	}
}

country_event = { #Country responds
	id = shx.65
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.65" }
	picture = GFX_report_event_AUS_Ausgleich_dip_agree
	title = {
		text = shx.65.t.accept
		trigger = { has_country_flag = SHX_alliance_@FROM }
	}
	title = {
		text = shx.65.t.refuse
		trigger = { NOT = { has_country_flag = SHX_alliance_@FROM } }
	}

	desc = {
		text = shx.65.d.accept
		trigger = { has_country_flag = SHX_alliance_@FROM }
	}
	desc = {
		text = shx.65.d.refuse
		trigger = { NOT = { has_country_flag = SHX_alliance_@FROM } }
	}

	is_triggered_only = yes

	option = {
		name = shx.65.a
		trigger = {
			has_country_flag = SHX_alliance_@FROM
		}
		give_guarantee = FROM
		add_political_power = 25
		add_opinion_modifier = {
			target = FROM
			modifier = KR_approves_of_govt
		}
	}

	option = {
		name = shx.65.b
		trigger = {
			NOT = { has_country_flag = SHX_alliance_@FROM }
		}
		add_political_power = -25
		add_opinion_modifier = {
			target = FROM
			modifier = KR_disapproves_of_govt
		}
	}
}

country_event = { #request german arms
	id = shx.401
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.401" }
	title = shx.401.t
	desc = shx.401.d
	picture = GFX_report_event_YUN_KMT_Army
	is_triggered_only = yes

	option = { #request german arms
		name = shx.401.a
		GER = {
			country_event = {
				id = shx.402
				hours = 8
			}
		}
	}
}

country_event = { #germany receives this
	id = shx.402
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.402" }
	title = shx.402.t
	desc = shx.402.d
	picture = GFX_report_event_YUN_KMT_Army
	is_triggered_only = yes

	option = { #send some rifles to shanxi
		name = shx.402.a
		GER = {
			send_equipment = {
				equipment = infantry_equipment
				amount = 3000
				target = SHX
			}
		}
		SHX = { country_event = shx.403 }
	}

	option = { #we take no interest in shanxi
		name = shx.402.b
		SHX = { country_event = shx.404 }
	}
}

country_event = { #shanxi receives german arms
	id = shx.403
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.403" }
	title = shx.403.t
	desc = shx.403.d
	picture = GFX_report_event_YUN_KMT_Army
	is_triggered_only = yes

	option = { #shanxi defends itself
		name = shx.403.a
	}
}

country_event = { #shanxi doesn't receive german arms
	id = shx.404
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.404" }
	title = shx.404.t
	desc = shx.404.d
	picture = GFX_report_event_YUN_KMT_Army
	is_triggered_only = yes

	option = { #shanxi on its own
		name = shx.404.a
	}
}

country_event = { #request russian arms
	id = shx.405
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.405" }
	title = shx.405.t
	desc = shx.405.d
	picture = GFX_report_event_TIB_army
	is_triggered_only = yes

	option = { #request russian arms
		name = shx.405.a
		RUS = {
			country_event = {
				id = shx.406
				hours = 8
			}
		}
	}
}

country_event = { #russia receives this
	id = shx.406
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.406" }
	title = shx.406.t
	desc = shx.406.d
	picture = GFX_report_event_TIB_army
	is_triggered_only = yes

	option = { #send some rifles to shanxi
		name = shx.406.a
		RUS = {
			send_equipment = {
				equipment = infantry_equipment
				amount = 3000
				target = SHX
			}
		}
		SHX = { country_event = shx.407 }
	}

	option = { #we take no interest in shanxi
		name = shx.406.b
		SHX = { country_event = shx.408 }
	}
}

country_event = { #shanxi receives russian arms
	id = shx.407
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.407" }
	title = shx.407.t
	desc = shx.407.d
	picture = GFX_report_event_TIB_army
	is_triggered_only = yes

	option = { #shanxi defends itself
		name = shx.407.a
	}
}

country_event = {
	id = shx.408
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.408" }
	title = shx.408.t
	desc = shx.408.d
	picture = GFX_report_event_TIB_army
	is_triggered_only = yes

	option = { #shanxi stands alone
		name = shx.408.a
	}
}

country_event = {
	id = shx.409 #yan xishan backs coup, gets to call himself imperial governor
	immediate = { log = "[GetDateText]: [Root.GetName]: event shx.409" }
	title = shx.409.t
	desc = shx.409.d
	picture = GFX_report_event_CHI_tiger_room
	is_triggered_only = yes

	option = { #cool
		name = shx.409.a
		add_political_power = 100
		set_cosmetic_tag = SHX_QIE
	}
}